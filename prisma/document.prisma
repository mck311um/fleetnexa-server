model RentalAgreement {
  id           String    @id @default(dbgenerated("gen_random_uuid()"))
  number       String
  rentalId     String    @unique
  tenantId     String
  customerId   String
  agreementUrl String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @updatedAt
  createdBy    String?
  updatedBy    String?
  signableUrl  String?
  customer     Customer  @relation(fields: [customerId], references: [id])
  rental       Rental    @relation(fields: [rentalId], references: [id])
  tenant       Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
}

model Invoice {
  id            String    @id @default(dbgenerated("gen_random_uuid()"))
  invoiceNumber String
  amount        Float
  rentalId      String    @unique
  tenantId      String
  customerId    String
  status        String    @default("pending")
  invoiceUrl    String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime? @updatedAt
  createdBy     String?
  updatedBy     String?
  customer      Customer  @relation(fields: [customerId], references: [id])
  rental        Rental    @relation(fields: [rentalId], references: [id])
  tenant        Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
}

model PaymentReceipt {
  id               String    @id @default(dbgenerated("gen_random_uuid()"))
  receiptNumber    String
  paymentId        String    @unique
  amount           Float
  bookingId        String?   
  tenantId         String
  customerId       String
  receiptUrl       String?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime? @updatedAt
  createdBy        String?
  updatedBy        String?
  customer         Customer  @relation(fields: [customerId], references: [id])
  rental           Rental?    @relation(fields: [bookingId], references: [id])
  tenant           Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  payment          Payment   @relation(fields: [paymentId], references: [id])

  @@unique([receiptNumber, tenantId], name: "receiptNumber_tenantId")
}